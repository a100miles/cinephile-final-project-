<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Login â€¢ Cinephile</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Flex:wght@100..1000&family=Lora:wght@400..700&display=swap" rel="stylesheet">

    <link href="/output.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.2/axios.min.js"></script>
</head>
<body class="min-h-screen flex items-center justify-center font-sans px-6">
    <div class="w-full max-w-md rounded-3xl border border-white/10 bg-white/5 p-8">
        <h1 class="font-serif text-3xl mb-2">Login</h1>
        <p class="text-white/60 text-sm mb-8">Access your profile and favorites.</p>
        
        <form id="loginForm" class="space-y-4">
        <input id="identifier" placeholder="Username or Email" class="..." />
        <input id="password" type="password" placeholder="Password" class="..." />
        <button class="...">Login</button>
        </form>


        <div class="mt-6 text-sm text-white/60">
            No account? <a class="text-white underline" href="signup.html">Sign up</a>
        </div>
        <div class="mt-2 text-sm text-white/60">
            <a class="text-white/80 underline" href="index.html">Back to home</a>
        </div>
    </div>

<script>
document.getElementById('loginForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    try {
        const res = await axios.post('/api/auth/login', {
            identifier: document.getElementById('identifier').value,
            password: document.getElementById('password').value
        });

        localStorage.setItem('token', res.data.token);
        localStorage.setItem('username', res.data.username);
        window.location.href = 'index.html';
    } catch (err) {
        alert(err.response?.data?.error || 'Login failed');
    }
});
</script>
</body>
</html>
